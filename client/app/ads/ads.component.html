<app-loading [condition]="isLoading"></app-loading>

<app-toast [message]="toast.message"></app-toast>

<div class="card" *ngIf="!isLoading">
  <h4 class="card-header">Current ads ({{ads.length}})</h4>
  <div class="card-block">
    <table class="table table-bordered table-striped">
      <thead class="thead-default">
      <tr>
        <th>Name</th>
        <th>Age</th>
        <th>Weight</th>
        <th>Actions</th>
      </tr>
      </thead>
      <tbody *ngIf="ads.length === 0">
      <tr>
        <td colspan="4">There are no cats in the DB. Add a new cat below.</td>
      </tr>
      </tbody>
      <tbody *ngIf="!isEditing">
      <tr *ngFor="let ad of ads">
        <td>{{ad.name}}</td>
        <td>{{ad.age}}</td>
        <td>{{ad.weight}}</td>
        <td>
          <button class="btn btn-sm btn-warning" (click)="enableEditing(ad)"><i class="fa fa-pencil"></i> Edit</button> <button class="btn btn-sm btn-danger" (click)="deleteAd(ad)"><i class="fa fa-trash"></i> Delete</button>
        </td>
      </tr>
      </tbody>
      <tbody *ngIf="isEditing">
      <tr>
        <td colspan="4">
          <form class="form-inline" #form="ngForm" (ngSubmit)="editAd(ad)" style="display:inline">
            <div class="form-group">
              <input class="form-control" name="name" [(ngModel)]="ad.name" placeholder="Name" required>
            </div>
            <div class="form-group">
              <input class="form-control" type="number" name="age" [(ngModel)]="ad.age" placeholder="Age" min="0" required>
            </div>
            <div class="form-group">
              <input class="form-control" type="number" name="weight" [(ngModel)]="ad.weight" placeholder="Weight" step="any" min="0" required>
            </div>
            <button class="btn btn-sm btn-primary" type="submit" [disabled]="!form.form.valid"><i class="fa fa-floppy-o"></i> Save</button>
          </form>
          <button class="btn btn-sm btn-warning" (click)="cancelEditing()"><i class="fa fa-times"></i> Cancel</button>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>

<div class="card" *ngIf="!isEditing">
  <h4 class="card-header">Add new advertisement</h4>
  <div class="card-block">
    <form class="form-inline" [formGroup]="addAdForm" (ngSubmit)="addAd()" style="text-align:center">
    <table class="table table-hover">
      <thead>
      <tr>
        <th>
          <div class="form-inline">
            Name: <input class="form-control" name="name" formControlName="name" placeholder="Name">
          </div>
        </th>
        <th>
          <div class="form-inline">
            Text: <input class="form-control"  placeholder="Text" step="any" >
          </div>
        </th>
      </tr>
      <tr>
        <th>
          <div class="form-inline" [formGroup]="myGroup">
            Screen: <ss-multiselect-dropdown [options]="screenOptions"
                                     [(ngModel)]="screenOption"
                                     [ngModelOptions]="{standalone: true}"
                                     (ngModelChange)="onChangeScreen($event)"
            ></ss-multiselect-dropdown>
          </div>
        </th>
        <th>
          <div class="form-inline" [formGroup]="myGroup">
            Images: <ss-multiselect-dropdown [options]="imageOptions"
                                     [(ngModel)]="imageOption"
                                     [ngModelOptions]="{standalone: true}"
                                     (ngModelChange)="onChangeImage($event)"
            ></ss-multiselect-dropdown>
          </div>
        </th>
      </tr>
      <tr>
        <th>
          <div class="form-inline" [formGroup]="myGroup">
            Templates: <ss-multiselect-dropdown [options]="templateOptions"
                                     [(ngModel)]="templateOption"
                                     [ngModelOptions]="{standalone: true}"
                                     (ngModelChange)="onChangeTemplate($event)"
            ></ss-multiselect-dropdown>
          </div>
        </th>
        <th>
          <div class="form-inline">
            Duration(Min.): <input class="form-control" type="number" name="ttl"
                    placeholder="Duration in min"
                   step="any" min="1" max="60">
          </div>
        </th>
      </tr>
      <tr>
        <th>
          <div class="form-inline">
            <form #myForm="ngForm" novalidate class="form-inline">
              <my-date-picker name="mydate" class="datePicker"
                                          [options]="datePickerOptions"
                                          [placeholder]="startDatePlaceHolder"
                                          [(ngModel)]="startDate"
                                          [selector]="selector"
                                          (dateChanged)="onDateChanged($event)"
            ></my-date-picker>
            </form>
          </div>
        </th>
        <th>
          <div class="form-inline">
            <form #myForm="ngForm" novalidate class="form-inline">
              <my-date-picker name="mydate" class="datePicker"
                              [options]="datePickerOptions"
                              [placeholder]="endDatePlaceHolder"
                              [(ngModel)]="endDate"
                              [selector]="selector"
                              (dateChanged)="onDateChanged($event)"
              ></my-date-picker>
            </form>
          </div>
        </th>
      </tr>
      <tr>
        <th>
          <div class="form-inline" [formGroup]="myGroup">
            Days: <ss-multiselect-dropdown [options]="dayOptions"
                                                [(ngModel)]="dayOption"
                                                [ngModelOptions]="{standalone: true}"
                                                (ngModelChange)="onChangeDay($event)"
          ></ss-multiselect-dropdown>
          </div>
        </th>
        <th>
          <tr>
           <th >Start Time:</th>
            <th>
                <div class="time-picker-label">
                  <input class="form-control time-picker" [ngModelOptions]="{standalone: true}" type="number" name="startTimeHour" [(ngModel)]="ad.age" placeholder="Hour" min="0" max="23" required>
                </div>
            </th>
            <th>
              <div class="time-picker-label">
                <input class="form-control time-picker" [ngModelOptions]="{standalone: true}" type="number" name="startTimeMinute" [(ngModel)]="ad.age" placeholder="Min." min="0" max="59" required>
              </div>
            </th>
          </tr>
        </th>
      </tr>
      <tr>
        <th></th>
        <th>
      <tr>
        <th >End Time:</th>
        <th>
          <div class="time-picker-label">
            <input class="form-control time-picker" [ngModelOptions]="{standalone: true}" type="number" name="startTimeHour" [(ngModel)]="ad.age" placeholder="Hour" min="0" max="23" required>
          </div>
        </th>
        <th>
          <div class="time-picker-label">
            <input class="form-control time-picker" [ngModelOptions]="{standalone: true}" type="number" name="startTimeMinute" [(ngModel)]="ad.age" placeholder="Min." min="0" max="59" required>
          </div>
        </th>
      </tr>
        </th>
      </tr>
      </thead>
    </table>


      <button class="btn btn-primary" type="submit" [disabled]="!addAdForm.valid"><i class="fa fa-floppy-o"></i> Add</button>
    </form>
  </div>
</div>
